"use strict";(self.webpackChunkmellou_billing=self.webpackChunkmellou_billing||[]).push([[710],{7710:(E,C,s)=>{s.r(C),s.d(C,{AreasModule:()=>I});var m=s(6895),l=s(433),h=s(4575),e=s(4650),L=s(4239),x=s(9651),f=s(1971),u=s(8717),_=s(6616),v=s(7044),S=s(1811),b=s(1102),p=s(3910),g=s(3679),c=s(6704),T=s(5635),A=s(6672);function O(a,n){if(1&a&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"nz-tag",12),e._uU(6),e.qZA()(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"date"),e.qZA()()),2&a){const o=n.$implicit;e.xp6(3),e.Oqu(o.name),e.xp6(3),e.hij("",o.subareaCount||0," subareas"),e.xp6(2),e.Oqu(e.xi3(9,3,o.createdAt,"short"))}}function F(a,n){if(1&a){const o=e.EpF();e.TgZ(0,"tr")(1,"td",13),e._UZ(2,"i",14),e.TgZ(3,"p",15),e._uU(4,"No areas found"),e.qZA(),e.TgZ(5,"button",16),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.showModal())}),e._UZ(6,"i",3),e._uU(7," Add Your First Area "),e.qZA()()()}}function y(a,n){if(1&a){const o=e.EpF();e.ynx(0),e.TgZ(1,"form",17)(2,"nz-form-item")(3,"nz-form-label",18),e._uU(4,"Area Name"),e.qZA(),e.TgZ(5,"nz-form-control",19)(6,"input",20),e.NdJ("keyup.enter",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.handleOk())}),e.qZA()()()(),e.BQk()}if(2&a){const o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.areaForm)}}const U=function(){return{x:"500px"}};let N=(()=>{const n=class{constructor(t,r,i,d){this.fb=t,this.router=r,this.appService=i,this.message=d,this.areas=[],this.loading=!1,this.isModalVisible=!1,this.modalLoading=!1}ngOnInit(){this.areaForm=this.fb.group({name:["",[l.kI.required]]}),this.loadAreas()}loadAreas(){this.loading=!0,this.appService.getAreas().subscribe({next:t=>{this.areas=t.data||t,this.loading=!1},error:()=>{this.message.error("Failed to load areas"),this.loading=!1}})}showModal(){this.isModalVisible=!0,this.areaForm.reset()}handleCancel(){this.isModalVisible=!1,this.areaForm.reset()}handleOk(){this.areaForm.valid?(this.modalLoading=!0,this.appService.addArea(this.areaForm.value).subscribe({next:()=>{this.message.success("Area added successfully"),this.isModalVisible=!1,this.modalLoading=!1,this.areaForm.reset(),this.loadAreas()},error:()=>{this.message.error("Failed to add area"),this.modalLoading=!1}})):Object.values(this.areaForm.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))})}navigateToSubareas(){this.router.navigate(["/areas/subareas"])}};let a=n;return n.\u0275fac=function(r){return new(r||n)(e.Y36(l.qu),e.Y36(h.F0),e.Y36(L.z),e.Y36(x.dD))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-area-list"]],decls:23,vars:9,consts:[["nzTitle","Areas Management"],[2,"margin-bottom","16px"],["nz-button","","nzType","primary",2,"margin-right","8px",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","environment"],[3,"nzData","nzLoading","nzPageSize","nzScroll"],["areasTable",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["nzTitle","Add New Area","nzOkText","Add Area","nzCancelText","Cancel",3,"nzVisible","nzOkLoading","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["nzColor","purple"],["colspan","3",2,"text-align","center","color","#999","padding","40px"],["nz-icon","","nzType","environment",2,"font-size","48px","opacity","0.3"],[2,"margin-top","16px"],["nz-button","","nzType","primary",3,"click"],["nz-form","","nzLayout","vertical",3,"formGroup"],["nzRequired",""],["nzErrorTip","Please enter area name"],["nz-input","","formControlName","name","placeholder","Enter area name",3,"keyup.enter"]],template:function(r,i){if(1&r&&(e.TgZ(0,"nz-card",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return i.showModal()}),e._UZ(3,"i",3),e._uU(4," Add Area "),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.navigateToSubareas()}),e._UZ(6,"i",5),e._uU(7," Manage Subareas "),e.qZA()(),e.TgZ(8,"nz-table",6,7)(10,"thead")(11,"tr")(12,"th"),e._uU(13,"Area Name"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Number of Subareas"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Created At"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,O,10,6,"tr",8),e.YNc(20,F,8,0,"tr",9),e.qZA()()(),e.TgZ(21,"nz-modal",10),e.NdJ("nzVisibleChange",function(z){return i.isModalVisible=z})("nzOnCancel",function(){return i.handleCancel()})("nzOnOk",function(){return i.handleOk()}),e.YNc(22,y,7,1,"ng-container",11),e.qZA()),2&r){const d=e.MAs(9);e.xp6(8),e.Q6J("nzData",i.areas)("nzLoading",i.loading)("nzPageSize",10)("nzScroll",e.DdM(8,U)),e.xp6(11),e.Q6J("ngForOf",d.data),e.xp6(1),e.Q6J("ngIf",0===i.areas.length),e.xp6(1),e.Q6J("nzVisible",i.isModalVisible)("nzOkLoading",i.modalLoading)}},dependencies:[m.sg,m.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,f.bd,u.N8,u.Uo,u._C,u.Om,u.p0,u.$Z,_.ix,v.w,S.dQ,b.Ls,p.du,p.Hf,g.t3,g.SK,c.Lr,c.Nx,c.iK,c.Fd,T.Zp,A.j,m.uU]}),a})();var Z=s(8231);function k(a,n){if(1&a){const o=e.EpF();e.TgZ(0,"div",11)(1,"i",12),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.navigateToAreas())}),e.qZA(),e.TgZ(2,"span",13),e._uU(3,"Subareas Management"),e.qZA()()}}function J(a,n){if(1&a&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"nz-tag",14),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"code",15),e._uU(9),e.qZA()()()),2&a){const o=n.$implicit;e.xp6(3),e.Oqu(o.name),e.xp6(3),e.Oqu(o.areaName),e.xp6(3),e.Oqu(o.areaId)}}function V(a,n){if(1&a){const o=e.EpF();e.TgZ(0,"tr")(1,"td",16),e._UZ(2,"i",17),e.TgZ(3,"p",18),e._uU(4,"No subareas found"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.showModal())}),e._UZ(6,"i",4),e._uU(7," Add Your First Subarea "),e.qZA()()()}}function M(a,n){if(1&a&&e._UZ(0,"nz-option",26),2&a){const o=n.$implicit;e.Q6J("nzValue",o._id)("nzLabel",o.name)}}function q(a,n){if(1&a){const o=e.EpF();e.ynx(0),e.TgZ(1,"form",19)(2,"nz-form-item")(3,"nz-form-label",20),e._uU(4,"Select Area"),e.qZA(),e.TgZ(5,"nz-form-control",21)(6,"nz-select",22),e.YNc(7,M,1,2,"nz-option",23),e.qZA()()(),e.TgZ(8,"nz-form-item")(9,"nz-form-label",20),e._uU(10,"Subarea Name"),e.qZA(),e.TgZ(11,"nz-form-control",24)(12,"input",25),e.NdJ("keyup.enter",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.handleOk())}),e.qZA()()()(),e.BQk()}if(2&a){const o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.subareaForm),e.xp6(6),e.Q6J("ngForOf",o.areas)}}const Y=function(){return{x:"600px"}},Q=[{path:"",component:N},{path:"subareas",component:(()=>{const n=class{constructor(t,r,i,d){this.fb=t,this.router=r,this.appService=i,this.message=d,this.areas=[],this.subareas=[],this.loading=!1,this.isModalVisible=!1,this.modalLoading=!1}ngOnInit(){this.subareaForm=this.fb.group({areaId:[null,[l.kI.required]],name:["",[l.kI.required]]}),this.loadData()}loadData(){this.loading=!0,this.appService.getAreas().subscribe({next:t=>{this.areas=t.data||t},error:()=>{this.message.error("Failed to load areas")}}),this.appService.getSubareas().subscribe({next:t=>{this.subareas=t.data||t,this.loading=!1},error:()=>{this.message.error("Failed to load subareas"),this.loading=!1}})}showModal(){this.isModalVisible=!0,this.subareaForm.reset()}handleCancel(){this.isModalVisible=!1,this.subareaForm.reset()}handleOk(){this.subareaForm.valid?(this.modalLoading=!0,this.appService.addSubarea(this.subareaForm.value).subscribe({next:()=>{this.message.success("Subarea added successfully"),this.isModalVisible=!1,this.modalLoading=!1,this.subareaForm.reset(),this.loadData()},error:()=>{this.message.error("Failed to add subarea"),this.modalLoading=!1}})):Object.values(this.subareaForm.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))})}navigateToAreas(){this.router.navigate(["/areas"])}};let a=n;return n.\u0275fac=function(r){return new(r||n)(e.Y36(l.qu),e.Y36(h.F0),e.Y36(L.z),e.Y36(x.dD))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-subarea-list"]],decls:22,vars:10,consts:[[3,"nzTitle"],["titleTemplate",""],[2,"margin-bottom","16px"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],[3,"nzData","nzLoading","nzPageSize","nzScroll"],["subareasTable",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["nzTitle","Add New Subarea","nzOkText","Add Subarea","nzCancelText","Cancel",3,"nzVisible","nzOkLoading","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],[2,"display","flex","align-items","center"],["nz-icon","","nzType","arrow-left","nzTheme","outline","nz-tooltip","Back to Areas",2,"cursor","pointer","margin-right","16px","font-size","18px",3,"click"],[2,"font-size","18px","font-weight","bold"],["nzColor","blue"],[2,"font-size","11px","color","#666"],["colspan","3",2,"text-align","center","color","#999","padding","40px"],["nz-icon","","nzType","environment",2,"font-size","48px","opacity","0.3"],[2,"margin-top","16px"],["nz-form","","nzLayout","vertical",3,"formGroup"],["nzRequired",""],["nzErrorTip","Please select an area"],["formControlName","areaId","nzPlaceHolder","Select Area","nzShowSearch",""],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzErrorTip","Please enter subarea name"],["nz-input","","formControlName","name","placeholder","Enter subarea name",3,"keyup.enter"],[3,"nzValue","nzLabel"]],template:function(r,i){if(1&r&&(e.TgZ(0,"nz-card",0),e.YNc(1,k,4,0,"ng-template",null,1,e.W1O),e.TgZ(3,"div",2)(4,"button",3),e.NdJ("click",function(){return i.showModal()}),e._UZ(5,"i",4),e._uU(6," Add Subarea "),e.qZA()(),e.TgZ(7,"nz-table",5,6)(9,"thead")(10,"tr")(11,"th"),e._uU(12,"Subarea Name"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Area"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Area ID"),e.qZA()()(),e.TgZ(17,"tbody"),e.YNc(18,J,10,3,"tr",7),e.YNc(19,V,8,0,"tr",8),e.qZA()()(),e.TgZ(20,"nz-modal",9),e.NdJ("nzVisibleChange",function(z){return i.isModalVisible=z})("nzOnCancel",function(){return i.handleCancel()})("nzOnOk",function(){return i.handleOk()}),e.YNc(21,q,13,2,"ng-container",10),e.qZA()),2&r){const d=e.MAs(2),z=e.MAs(8);e.Q6J("nzTitle",d),e.xp6(7),e.Q6J("nzData",i.subareas)("nzLoading",i.loading)("nzPageSize",10)("nzScroll",e.DdM(9,Y)),e.xp6(11),e.Q6J("ngForOf",z.data),e.xp6(1),e.Q6J("ngIf",0===i.subareas.length),e.xp6(1),e.Q6J("nzVisible",i.isModalVisible)("nzOkLoading",i.modalLoading)}},dependencies:[m.sg,m.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,f.bd,u.N8,u.Uo,u._C,u.Om,u.p0,u.$Z,_.ix,v.w,S.dQ,b.Ls,p.du,p.Hf,g.t3,g.SK,c.Lr,c.Nx,c.iK,c.Fd,T.Zp,Z.Ip,Z.Vq,A.j]}),a})()}];let D=(()=>{const n=class{};let a=n;return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[h.Bz.forChild(Q),h.Bz]}),a})(),I=(()=>{const n=class{};let a=n;return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.ez,l.u5,l.UX,D,f.vh,u.HQ,_.sL,b.PV,p.Qp,c.U5,T.o7,Z.LV,A.X,g.Jb]}),a})()}}]);