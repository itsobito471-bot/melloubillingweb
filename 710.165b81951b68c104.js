"use strict";(self.webpackChunkmellou_billing=self.webpackChunkmellou_billing||[]).push([[710],{7710:(K,x,s)=>{s.r(x),s.d(x,{AreasModule:()=>H});var m=s(6895),l=s(433),h=s(4575),e=s(4650),L=s(4239),S=s(9651),f=s(1971),c=s(8717),_=s(6616),v=s(7044),O=s(1811),b=s(1102),p=s(3910),g=s(3679),d=s(6704),T=s(5635),A=s(6672),Z=s(6903);function F(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(r);const o=e.oxw();return e.KtG(o.showModal())}),e._UZ(1,"i",11),e._uU(2," Add Area "),e.qZA()}}function y(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(r);const o=e.oxw();return e.KtG(o.navigateToSubareas())}),e._UZ(1,"i",13),e._uU(2," Manage Subareas "),e.qZA()}}function N(t,n){if(1&t&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"nz-tag",14),e._uU(6),e.qZA()(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"date"),e.qZA()()),2&t){const r=n.$implicit;e.xp6(3),e.Oqu(r.name),e.xp6(3),e.hij("",r.subareaCount||0," subareas"),e.xp6(2),e.Oqu(e.xi3(9,3,r.createdAt,"short"))}}function U(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"tr")(1,"td",15),e._UZ(2,"i",16),e.TgZ(3,"p",17),e._uU(4,"No areas found"),e.qZA(),e.TgZ(5,"button",10),e.NdJ("click",function(){e.CHM(r);const o=e.oxw();return e.KtG(o.showModal())}),e._UZ(6,"i",11),e._uU(7," Add Your First Area "),e.qZA()()()}}function k(t,n){if(1&t){const r=e.EpF();e.ynx(0),e.TgZ(1,"form",18)(2,"nz-form-item")(3,"nz-form-label",19),e._uU(4,"Area Name"),e.qZA(),e.TgZ(5,"nz-form-control",20)(6,"input",21),e.NdJ("keyup.enter",function(){e.CHM(r);const o=e.oxw();return e.KtG(o.handleOk())}),e.qZA()()()(),e.BQk()}if(2&t){const r=e.oxw();e.xp6(1),e.Q6J("formGroup",r.areaForm)}}const J=function(){return{x:"500px"}};let M=(()=>{const n=class{constructor(a,o,i,u){this.fb=a,this.router=o,this.appService=i,this.message=u,this.areas=[],this.loading=!1,this.isModalVisible=!1,this.modalLoading=!1}ngOnInit(){this.areaForm=this.fb.group({name:["",[l.kI.required]]}),this.loadAreas()}loadAreas(){this.loading=!0,this.appService.getAreas().subscribe({next:a=>{this.areas=a.data||a,this.loading=!1},error:()=>{this.message.error("Failed to load areas"),this.loading=!1}})}showModal(){this.isModalVisible=!0,this.areaForm.reset()}handleCancel(){this.isModalVisible=!1,this.areaForm.reset()}handleOk(){this.areaForm.valid?(this.modalLoading=!0,this.appService.addArea(this.areaForm.value).subscribe({next:()=>{this.message.success("Area added successfully"),this.isModalVisible=!1,this.modalLoading=!1,this.areaForm.reset(),this.loadAreas()},error:()=>{this.message.error("Failed to add area"),this.modalLoading=!1}})):Object.values(this.areaForm.controls).forEach(a=>{a.invalid&&(a.markAsDirty(),a.updateValueAndValidity({onlySelf:!0}))})}navigateToSubareas(){this.router.navigate(["/areas/subareas"])}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(l.qu),e.Y36(h.F0),e.Y36(L.z),e.Y36(S.dD))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-area-list"]],decls:20,vars:9,consts:[["nzTitle","Areas Management"],[2,"margin-bottom","16px"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","default",3,"click",4,"nzSpaceItem"],[3,"nzData","nzLoading","nzPageSize","nzScroll"],["areasTable",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["nzTitle","Add New Area","nzOkText","Add Area","nzCancelText","Cancel",3,"nzVisible","nzOkLoading","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","environment"],["nzColor","purple"],["colspan","3",2,"text-align","center","color","#999","padding","40px"],["nz-icon","","nzType","environment",2,"font-size","48px","opacity","0.3"],[2,"margin-top","16px"],["nz-form","","nzLayout","vertical",3,"formGroup"],["nzRequired",""],["nzErrorTip","Please enter area name"],["nz-input","","formControlName","name","placeholder","Enter area name",3,"keyup.enter"]],template:function(o,i){if(1&o&&(e.TgZ(0,"nz-card",0)(1,"div",1)(2,"nz-space"),e.YNc(3,F,3,0,"button",2),e.YNc(4,y,3,0,"button",3),e.qZA()(),e.TgZ(5,"nz-table",4,5)(7,"thead")(8,"tr")(9,"th"),e._uU(10,"Area Name"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Number of Subareas"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Created At"),e.qZA()()(),e.TgZ(15,"tbody"),e.YNc(16,N,10,6,"tr",6),e.YNc(17,U,8,0,"tr",7),e.qZA()()(),e.TgZ(18,"nz-modal",8),e.NdJ("nzVisibleChange",function(z){return i.isModalVisible=z})("nzOnCancel",function(){return i.handleCancel()})("nzOnOk",function(){return i.handleOk()}),e.YNc(19,k,7,1,"ng-container",9),e.qZA()),2&o){const u=e.MAs(6);e.xp6(5),e.Q6J("nzData",i.areas)("nzLoading",i.loading)("nzPageSize",10)("nzScroll",e.DdM(8,J)),e.xp6(11),e.Q6J("ngForOf",u.data),e.xp6(1),e.Q6J("ngIf",0===i.areas.length),e.xp6(1),e.Q6J("nzVisible",i.isModalVisible)("nzOkLoading",i.modalLoading)}},dependencies:[m.sg,m.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,f.bd,c.N8,c.Uo,c._C,c.Om,c.p0,c.$Z,_.ix,v.w,O.dQ,b.Ls,p.du,p.Hf,g.t3,g.SK,d.Lr,d.Nx,d.iK,d.Fd,T.Zp,A.j,Z.NU,Z.$1,m.uU]}),t})();var C=s(8231);function V(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"div",11)(1,"i",12),e.NdJ("click",function(){e.CHM(r);const o=e.oxw();return e.KtG(o.navigateToAreas())}),e.qZA(),e.TgZ(2,"span",13),e._uU(3,"Subareas Management"),e.qZA()()}}function q(t,n){if(1&t&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"nz-tag",14),e._uU(6),e.qZA()(),e.TgZ(7,"td")(8,"code",15),e._uU(9),e.qZA()()()),2&t){const r=n.$implicit;e.xp6(3),e.Oqu(r.name),e.xp6(3),e.Oqu(r.areaName),e.xp6(3),e.Oqu(r.areaId)}}function Y(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"tr")(1,"td",16),e._UZ(2,"i",17),e.TgZ(3,"p",18),e._uU(4,"No subareas found"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){e.CHM(r);const o=e.oxw();return e.KtG(o.showModal())}),e._UZ(6,"i",4),e._uU(7," Add Your First Subarea "),e.qZA()()()}}function Q(t,n){if(1&t&&e._UZ(0,"nz-option",26),2&t){const r=n.$implicit;e.Q6J("nzValue",r._id)("nzLabel",r.name)}}function I(t,n){if(1&t){const r=e.EpF();e.ynx(0),e.TgZ(1,"form",19)(2,"nz-form-item")(3,"nz-form-label",20),e._uU(4,"Select Area"),e.qZA(),e.TgZ(5,"nz-form-control",21)(6,"nz-select",22),e.YNc(7,Q,1,2,"nz-option",23),e.qZA()()(),e.TgZ(8,"nz-form-item")(9,"nz-form-label",20),e._uU(10,"Subarea Name"),e.qZA(),e.TgZ(11,"nz-form-control",24)(12,"input",25),e.NdJ("keyup.enter",function(){e.CHM(r);const o=e.oxw();return e.KtG(o.handleOk())}),e.qZA()()()(),e.BQk()}if(2&t){const r=e.oxw();e.xp6(1),e.Q6J("formGroup",r.subareaForm),e.xp6(6),e.Q6J("ngForOf",r.areas)}}const D=function(){return{x:"600px"}},E=[{path:"",component:M},{path:"subareas",component:(()=>{const n=class{constructor(a,o,i,u){this.fb=a,this.router=o,this.appService=i,this.message=u,this.areas=[],this.subareas=[],this.loading=!1,this.isModalVisible=!1,this.modalLoading=!1}ngOnInit(){this.subareaForm=this.fb.group({areaId:[null,[l.kI.required]],name:["",[l.kI.required]]}),this.loadData()}loadData(){this.loading=!0,this.appService.getAreas().subscribe({next:a=>{this.areas=a.data||a},error:()=>{this.message.error("Failed to load areas")}}),this.appService.getSubareas().subscribe({next:a=>{this.subareas=a.data||a,this.loading=!1},error:()=>{this.message.error("Failed to load subareas"),this.loading=!1}})}showModal(){this.isModalVisible=!0,this.subareaForm.reset()}handleCancel(){this.isModalVisible=!1,this.subareaForm.reset()}handleOk(){this.subareaForm.valid?(this.modalLoading=!0,this.appService.addSubarea(this.subareaForm.value).subscribe({next:()=>{this.message.success("Subarea added successfully"),this.isModalVisible=!1,this.modalLoading=!1,this.subareaForm.reset(),this.loadData()},error:()=>{this.message.error("Failed to add subarea"),this.modalLoading=!1}})):Object.values(this.subareaForm.controls).forEach(a=>{a.invalid&&(a.markAsDirty(),a.updateValueAndValidity({onlySelf:!0}))})}navigateToAreas(){this.router.navigate(["/areas"])}};let t=n;return n.\u0275fac=function(o){return new(o||n)(e.Y36(l.qu),e.Y36(h.F0),e.Y36(L.z),e.Y36(S.dD))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-subarea-list"]],decls:22,vars:10,consts:[[3,"nzTitle"],["titleTemplate",""],[2,"margin-bottom","16px"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],[3,"nzData","nzLoading","nzPageSize","nzScroll"],["subareasTable",""],[4,"ngFor","ngForOf"],[4,"ngIf"],["nzTitle","Add New Subarea","nzOkText","Add Subarea","nzCancelText","Cancel",3,"nzVisible","nzOkLoading","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],[2,"display","flex","align-items","center"],["nz-icon","","nzType","arrow-left","nzTheme","outline","nz-tooltip","Back to Areas",2,"cursor","pointer","margin-right","16px","font-size","18px",3,"click"],[2,"font-size","18px","font-weight","bold"],["nzColor","blue"],[2,"font-size","11px","color","#666"],["colspan","3",2,"text-align","center","color","#999","padding","40px"],["nz-icon","","nzType","environment",2,"font-size","48px","opacity","0.3"],[2,"margin-top","16px"],["nz-form","","nzLayout","vertical",3,"formGroup"],["nzRequired",""],["nzErrorTip","Please select an area"],["formControlName","areaId","nzPlaceHolder","Select Area","nzShowSearch",""],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzErrorTip","Please enter subarea name"],["nz-input","","formControlName","name","placeholder","Enter subarea name",3,"keyup.enter"],[3,"nzValue","nzLabel"]],template:function(o,i){if(1&o&&(e.TgZ(0,"nz-card",0),e.YNc(1,V,4,0,"ng-template",null,1,e.W1O),e.TgZ(3,"div",2)(4,"button",3),e.NdJ("click",function(){return i.showModal()}),e._UZ(5,"i",4),e._uU(6," Add Subarea "),e.qZA()(),e.TgZ(7,"nz-table",5,6)(9,"thead")(10,"tr")(11,"th"),e._uU(12,"Subarea Name"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Area"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Area ID"),e.qZA()()(),e.TgZ(17,"tbody"),e.YNc(18,q,10,3,"tr",7),e.YNc(19,Y,8,0,"tr",8),e.qZA()()(),e.TgZ(20,"nz-modal",9),e.NdJ("nzVisibleChange",function(z){return i.isModalVisible=z})("nzOnCancel",function(){return i.handleCancel()})("nzOnOk",function(){return i.handleOk()}),e.YNc(21,I,13,2,"ng-container",10),e.qZA()),2&o){const u=e.MAs(2),z=e.MAs(8);e.Q6J("nzTitle",u),e.xp6(7),e.Q6J("nzData",i.subareas)("nzLoading",i.loading)("nzPageSize",10)("nzScroll",e.DdM(9,D)),e.xp6(11),e.Q6J("ngForOf",z.data),e.xp6(1),e.Q6J("ngIf",0===i.subareas.length),e.xp6(1),e.Q6J("nzVisible",i.isModalVisible)("nzOkLoading",i.modalLoading)}},dependencies:[m.sg,m.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,f.bd,c.N8,c.Uo,c._C,c.Om,c.p0,c.$Z,_.ix,v.w,O.dQ,b.Ls,p.du,p.Hf,g.t3,g.SK,d.Lr,d.Nx,d.iK,d.Fd,T.Zp,C.Ip,C.Vq,A.j]}),t})()}];let G=(()=>{const n=class{};let t=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[h.Bz.forChild(E),h.Bz]}),t})(),H=(()=>{const n=class{};let t=n;return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.ez,l.u5,l.UX,G,f.vh,c.HQ,_.sL,b.PV,p.Qp,d.U5,T.o7,C.LV,A.X,g.Jb,Z.zf]}),t})()}}]);