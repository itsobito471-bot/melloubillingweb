<nz-card nzTitle="Area Management">
    <div nz-row [nzGutter]="[16, 16]">
        <!-- Add Area -->
        <div nz-col [nzXs]="24" [nzMd]="12">
            <nz-card nzTitle="Add New Area" nzSize="small">
                <form nz-form [formGroup]="areaForm" (ngSubmit)="addArea()" nzLayout="vertical">
                    <nz-form-item>
                        <nz-form-label nzRequired>Area Name</nz-form-label>
                        <nz-form-control nzErrorTip="Please enter area name">
                            <nz-input-group nzPrefixIcon="environment">
                                <input nz-input formControlName="name" placeholder="Area Name" />
                            </nz-input-group>
                        </nz-form-control>
                    </nz-form-item>
                    <button nz-button nzType="primary" type="submit" [nzLoading]="loading">
                        <i nz-icon nzType="plus" nzTheme="outline"></i>
                        Add Area
                    </button>
                </form>
            </nz-card>
        </div>

        <!-- Add Subarea -->
        <div nz-col [nzXs]="24" [nzMd]="12">
            <nz-card nzTitle="Add Subarea" nzSize="small">
                <form nz-form [formGroup]="subareaForm" (ngSubmit)="addSubarea()" nzLayout="vertical">
                    <nz-form-item>
                        <nz-form-label nzRequired>Select Area</nz-form-label>
                        <nz-form-control nzErrorTip="Please select area">
                            <nz-select formControlName="areaId" nzPlaceHolder="Select Area" nzShowSearch>
                                <nz-option *ngFor="let area of areas" [nzValue]="area._id"
                                    [nzLabel]="area.name"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>

                    <nz-form-item>
                        <nz-form-label nzRequired>Subarea Name</nz-form-label>
                        <nz-form-control nzErrorTip="Please enter subarea name">
                            <nz-input-group nzPrefixIcon="environment">
                                <input nz-input formControlName="name" placeholder="Subarea Name" />
                            </nz-input-group>
                        </nz-form-control>
                    </nz-form-item>

                    <button nz-button nzType="primary" type="submit" [nzLoading]="loading">
                        <i nz-icon nzType="plus" nzTheme="outline"></i>
                        Add Subarea
                    </button>
                </form>
            </nz-card>
        </div>
    </div>

    <nz-divider></nz-divider>

    <!-- Areas Table -->
    <h3><i nz-icon nzType="environment" nzTheme="outline"></i> Areas</h3>
    <nz-table #areasTable [nzData]="areas" [nzPageSize]="10" [nzScroll]="{ x: '500px' }" [nzLoading]="tableLoading">
        <thead>
            <tr>
                <th>Area Name</th>
                <th>Number of Subareas</th>
                <th>Created At</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let area of areasTable.data">
                <td><strong>{{ area.name }}</strong></td>
                <td>
                    <nz-tag nzColor="purple">{{ area.subareas?.length || 0 }} subareas</nz-tag>
                </td>
                <td>{{ area.createdAt | date:'short' }}</td>
            </tr>
            <tr *ngIf="areas.length === 0">
                <td colspan="3" style="text-align: center; color: #999;">
                    No areas found. Add one above.
                </td>
            </tr>
        </tbody>
    </nz-table>

    <nz-divider></nz-divider>

    <!-- Subareas Table -->
    <h3><i nz-icon nzType="environment" nzTheme="outline"></i> Subareas</h3>
    <nz-table #subareasTable [nzData]="getAllSubareas()" [nzPageSize]="10" [nzScroll]="{ x: '600px' }"
        [nzLoading]="tableLoading">
        <thead>
            <tr>
                <th>Subarea Name</th>
                <th>Area</th>
                <th>Area ID</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let subarea of subareasTable.data">
                <td><strong>{{ subarea.name }}</strong></td>
                <td>
                    <nz-tag nzColor="blue">{{ subarea.areaName }}</nz-tag>
                </td>
                <td><code style="font-size: 11px; color: #666;">{{ subarea.areaId }}</code></td>
            </tr>
            <tr *ngIf="getAllSubareas().length === 0">
                <td colspan="3" style="text-align: center; color: #999;">
                    No subareas found. Add one above.
                </td>
            </tr>
        </tbody>
    </nz-table>
</nz-card>