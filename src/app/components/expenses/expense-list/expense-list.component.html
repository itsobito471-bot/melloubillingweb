<nz-card nzTitle="Expense Management">
    <div class="header-actions" nz-row [nzGutter]="16" style="margin-bottom: 24px;">
        <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="6">
            <nz-select [(ngModel)]="filterCategoryId" (ngModelChange)="onFilterChange()"
                nzPlaceHolder="Filter by Category" nzAllowClear style="width: 100%;">
                <nz-option *ngFor="let cat of categories" [nzValue]="cat._id" [nzLabel]="cat.name"></nz-option>
            </nz-select>
        </div>
        <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="8">
            <nz-range-picker [(ngModel)]="dateRange" (ngModelChange)="onFilterChange()"
                style="width: 100%;"></nz-range-picker>
        </div>
        <div nz-col [nzXs]="24" [nzSm]="24" [nzMd]="10" style="text-align: right;">
            <nz-space>
                <button *nzSpaceItem nz-button nzType="default" (click)="navigateToCategories()">
                    <i nz-icon nzType="appstore"></i> Categories
                </button>
                <button *nzSpaceItem nz-button nzType="primary" (click)="navigateToCreate()">
                    <i nz-icon nzType="plus"></i> Add Expense
                </button>
            </nz-space>
        </div>
    </div>

    <nz-table #expenseTable [nzData]="expenses" [nzLoading]="loading" [nzFrontPagination]="false" [nzTotal]="total"
        [nzPageIndex]="page" [nzPageSize]="limit" (nzPageIndexChange)="onPageIndexChange($event)">
        <thead>
            <tr>
                <th>Date</th>
                <th>Category</th>
                <th>Description</th>
                <th>Payment Method</th>
                <th>Amount</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let expense of expenseTable.data">
                <td>{{ expense.date | date:'mediumDate' }}</td>
                <td><nz-tag [nzColor]="'blue'">{{ expense.category?.name || 'Uncategorized' }}</nz-tag></td>
                <td>{{ expense.description }}</td>
                <td>{{ expense.paymentMethod }}</td>
                <td><strong>â‚¹{{ expense.amount }}</strong></td>
                <td>
                    <button nz-button nzType="link" (click)="navigateToEdit(expense._id)">
                        <i nz-icon nzType="edit"></i>
                    </button>
                    <button nz-button nzType="link" nzDanger nz-popconfirm nzPopconfirmTitle="Delete this expense?"
                        (nzOnConfirm)="deleteExpense(expense._id)">
                        <i nz-icon nzType="delete"></i>
                    </button>
                </td>
            </tr>
        </tbody>
    </nz-table>
</nz-card>