<nz-card nzTitle="Inventory Management">
    <!-- Add Product Button -->
    <div style="margin-bottom: 16px;">
        <button nz-button nzType="primary" (click)="showAddModal()">
            <i nz-icon nzType="plus"></i>
            Add Product
        </button>
    </div>

    <!-- Products Table -->
    <nz-table #productTable [nzData]="products" [nzLoading]="tableLoading" [nzPageSize]="10"
        [nzScroll]="{ x: '700px' }">
        <thead>
            <tr>
                <th>Code</th>
                <th>Name</th>
                <th>Price</th>
                <th>Category</th>
                <th nzWidth="150px">Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let product of productTable.data">
                <td><code style="color: #b78fd1; font-weight: 600;">{{ product.code }}</code></td>
                <td>{{ product.name }}</td>
                <td>₹{{ product.price }}</td>
                <td>{{ product.category || '-' }}</td>
                <td>
                    <button nz-button nzType="link" (click)="showEditModal(product)">
                        <i nz-icon nzType="edit"></i>
                    </button>
                    <button nz-button nzType="link" nzDanger (click)="deleteProduct(product._id)">
                        <i nz-icon nzType="delete"></i>
                    </button>
                </td>
            </tr>
            <tr *ngIf="products.length === 0">
                <td colspan="5" style="text-align: center; color: #999; padding: 40px;">
                    <i nz-icon nzType="shopping" style="font-size: 48px; opacity: 0.3;"></i>
                    <p style="margin-top: 16px;">No products found</p>
                    <button nz-button nzType="primary" (click)="showAddModal()">
                        <i nz-icon nzType="plus"></i>
                        Add Your First Product
                    </button>
                </td>
            </tr>
        </tbody>
    </nz-table>
</nz-card>

<!-- Add/Edit Product Modal -->
<nz-modal [(nzVisible)]="isModalVisible" [nzTitle]="isEditing ? 'Edit Product' : 'Add New Product'"
    (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" [nzOkLoading]="modalLoading"
    [nzOkText]="isEditing ? 'Update Product' : 'Add Product'" nzCancelText="Cancel">
    <ng-container *nzModalContent>
        <form nz-form [formGroup]="productForm" nzLayout="vertical">
            <nz-form-item>
                <nz-form-label nzRequired>Product Code</nz-form-label>
                <nz-form-control nzErrorTip="Please enter product code">
                    <input nz-input formControlName="code" placeholder="e.g., PROD001"
                        style="text-transform: uppercase;" />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label nzRequired>Product Name</nz-form-label>
                <nz-form-control nzErrorTip="Please enter product name">
                    <input nz-input formControlName="name" placeholder="Enter product name" />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label nzRequired>Price (₹)</nz-form-label>
                <nz-form-control nzErrorTip="Please enter valid price">
                    <nz-input-number formControlName="price" [nzMin]="0" [nzStep]="1" nzPlaceHolder="Enter price"
                        style="width: 100%;">
                    </nz-input-number>
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label>Category</nz-form-label>
                <nz-form-control>
                    <input nz-input formControlName="category" placeholder="Enter category (optional)" />
                </nz-form-control>
            </nz-form-item>
        </form>
    </ng-container>
</nz-modal>