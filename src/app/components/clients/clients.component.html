<nz-card nzTitle="Client Management">
    <!-- Add Client Form -->
    <nz-card nzTitle="Add New Client" nzSize="small" style="margin-bottom: 24px;">
        <form nz-form [formGroup]="clientForm" (ngSubmit)="addClient()" nzLayout="vertical">
            <div nz-row [nzGutter]="16">
                <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="8">
                    <nz-form-item>
                        <nz-form-label nzRequired>Name</nz-form-label>
                        <nz-form-control nzErrorTip="Please enter client name">
                            <input nz-input formControlName="name" placeholder="Client Name" />
                        </nz-form-control>
                    </nz-form-item>
                </div>

                <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="8">
                    <nz-form-item>
                        <nz-form-label nzRequired>Phone</nz-form-label>
                        <nz-form-control nzErrorTip="Please enter phone number">
                            <input nz-input formControlName="phone" placeholder="Phone Number" />
                        </nz-form-control>
                    </nz-form-item>
                </div>

                <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="8">
                    <nz-form-item>
                        <nz-form-label>Area</nz-form-label>
                        <nz-form-control>
                            <nz-select formControlName="area" nzPlaceHolder="Select Area" nzShowSearch nzAllowClear
                                (ngModelChange)="onAreaChange()">
                                <nz-option *ngFor="let area of areas" [nzValue]="area.name"
                                    [nzLabel]="area.name"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div>

                <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="8">
                    <nz-form-item>
                        <nz-form-label>Subarea</nz-form-label>
                        <nz-form-control>
                            <nz-select formControlName="subarea" nzPlaceHolder="Select Subarea" nzShowSearch
                                nzAllowClear [nzDisabled]="!selectedArea">
                                <nz-option *ngFor="let subarea of filteredSubareas" [nzValue]="subarea"
                                    [nzLabel]="subarea"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div>

                <div nz-col [nzXs]="24" [nzSm]="12" [nzMd]="16">
                    <nz-form-item>
                        <nz-form-label>Address</nz-form-label>
                        <nz-form-control>
                            <input nz-input formControlName="address" placeholder="Full Address" />
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </div>

            <button nz-button nzType="primary" type="submit" [nzLoading]="loading">
                <i nz-icon nzType="plus"></i>
                Add Client
            </button>
        </form>
    </nz-card>

    <!-- Clients Table -->
    <div class="table-header">
        <h3><i nz-icon nzType="team"></i> All Clients</h3>
        <nz-tag nzColor="purple">{{ clients.length }} Clients</nz-tag>
    </div>

    <nz-table #clientsTable [nzData]="clients" [nzPageSize]="10" [nzScroll]="{ x: '700px' }" [nzLoading]="tableLoading">
        <thead>
            <tr>
                <th>Name</th>
                <th>Phone</th>
                <th>Area</th>
                <th>Subarea</th>
                <th>Address</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let client of clientsTable.data">
                <td><strong>{{ client.name }}</strong></td>
                <td>{{ client.phone }}</td>
                <td>{{ client.area || '-' }}</td>
                <td>{{ client.subarea || '-' }}</td>
                <td>{{ client.address || '-' }}</td>
            </tr>
            <tr *ngIf="clients.length === 0">
                <td colspan="5" style="text-align: center; color: #999;">
                    No clients found. Add one above.
                </td>
            </tr>
        </tbody>
    </nz-table>
</nz-card>