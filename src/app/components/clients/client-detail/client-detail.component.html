<div *ngIf="loading" style="text-align: center; padding: 50px;">
    <nz-spin nzSimple nzTip="Loading client details..."></nz-spin>
</div>

<nz-card *ngIf="client && !loading" [nzTitle]="titleTemplate" [nzExtra]="extraTemplate">
    <ng-template #titleTemplate>
        <div style="display: flex; align-items: center;">
            <span style="font-size: 18px; font-weight: bold; margin-right: 12px;">{{ client.name }}</span>
            <nz-tag [nzColor]="client.status === 'Inactive' ? 'red' : 'green'">{{ client.status || 'Active' }}</nz-tag>
        </div>
    </ng-template>

    <ng-template #extraTemplate>
        <nz-space>
            <button *nzSpaceItem nz-button nzType="default" (click)="backToList()">
                <i nz-icon nzType="arrow-left"></i> Back
            </button>
            <button *nzSpaceItem nz-button nzType="primary" (click)="editClient()">
                <i nz-icon nzType="edit"></i> Edit
            </button>
        </nz-space>
    </ng-template>

    <nz-descriptions nzTitle="Personal Info" nzBordered [nzColumn]="{ xxl: 3, xl: 3, lg: 3, md: 2, sm: 1, xs: 1 }">
        <nz-descriptions-item nzTitle="Client Code">
            <code style="color: #1890ff;">{{ client.code }}</code>
        </nz-descriptions-item>
        <nz-descriptions-item nzTitle="Phone">{{ client.phone }}</nz-descriptions-item>
        <nz-descriptions-item nzTitle="Registered On">{{ client.createdAt | date:'mediumDate' }}</nz-descriptions-item>
        <nz-descriptions-item nzTitle="Area">{{ client.area || '-' }}</nz-descriptions-item>
        <nz-descriptions-item nzTitle="Subarea">{{ client.subarea || '-' }}</nz-descriptions-item>
        <nz-descriptions-item nzTitle="Address" [nzSpan]="3">{{ client.address || '-' }}</nz-descriptions-item>
    </nz-descriptions>

    <!-- Placeholder for future bills history -->
    <nz-divider></nz-divider>
    <div style="text-align: center; color: #999; padding: 20px;">
        <i nz-icon nzType="file-text" style="font-size: 32px; margin-bottom: 10px;"></i>
        <p>Transaction history showing here soon...</p>
    </div>
</nz-card>