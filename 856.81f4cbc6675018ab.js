"use strict";(self.webpackChunkmellou_billing=self.webpackChunkmellou_billing||[]).push([[856],{3856:(Rn,w,s)=>{s.r(w),s.d(w,{ClientsModule:()=>Hn});var d=s(6895),l=s(433),_=s(4575),n=s(4650),b=s(4239),S=s(9651),T=s(1971),m=s(8717),C=s(6616),Q=s(7044),J=s(1811),Z=s(1102),g=s(5635),u=s(3679),D=s(6672),z=s(6903),v=s(7570);function G(t,i){1&t&&n._UZ(0,"i",12)}function P(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"button",17),n.NdJ("click",function(){n.CHM(e);const r=n.oxw().$implicit,a=n.oxw();return n.KtG(a.navigateToView(r._id))}),n._UZ(1,"i",18),n.qZA()}}function H(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"button",19),n.NdJ("click",function(){n.CHM(e);const r=n.oxw().$implicit,a=n.oxw();return n.KtG(a.navigateToEdit(r._id))}),n._UZ(1,"i",20),n.qZA()}}function K(t,i){if(1&t&&(n.TgZ(0,"tr")(1,"td")(2,"code",13),n._uU(3),n.qZA()(),n.TgZ(4,"td"),n._uU(5),n.qZA(),n.TgZ(6,"td"),n._uU(7),n.qZA(),n.TgZ(8,"td"),n._uU(9),n.qZA(),n.TgZ(10,"td")(11,"nz-tag",14),n._uU(12),n.qZA()(),n.TgZ(13,"td")(14,"nz-space"),n.YNc(15,P,2,0,"button",15),n.YNc(16,H,2,0,"button",16),n.qZA()()()),2&t){const e=i.$implicit;n.xp6(3),n.Oqu(e.code),n.xp6(2),n.Oqu(e.name),n.xp6(2),n.Oqu(e.phone),n.xp6(2),n.Oqu(e.area||"-"),n.xp6(2),n.Q6J("nzColor","Inactive"===e.status?"red":"green"),n.xp6(1),n.hij(" ",e.status||"Active"," ")}}let R=(()=>{const i=class{constructor(o,r,a){this.appService=o,this.router=r,this.message=a,this.clients=[],this.loading=!1,this.searchText=""}ngOnInit(){this.loadClients()}loadClients(){this.loading=!0,this.appService.getClients().subscribe({next:o=>{this.clients=o.data||o,this.loading=!1},error:()=>{this.message.error("Failed to load clients"),this.loading=!1}})}navigateToCreate(){this.router.navigate(["/clients/create"])}navigateToEdit(o){this.router.navigate(["/clients/edit",o])}navigateToView(o){this.router.navigate(["/clients/view",o])}onSearch(){}get filteredClients(){return this.searchText?this.clients.filter(o=>o.name.toLowerCase().includes(this.searchText.toLowerCase())||o.phone.includes(this.searchText)||o.code&&o.code.toLowerCase().includes(this.searchText.toLowerCase())):this.clients}};let t=i;return i.\u0275fac=function(r){return new(r||i)(n.Y36(b.z),n.Y36(_.F0),n.Y36(S.dD))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-client-list"]],decls:29,vars:12,consts:[["nzTitle","Clients Management"],["nz-row","",1,"header-actions",2,"margin-bottom","24px",3,"nzGutter"],["nz-col","",3,"nzXs","nzSm","nzMd"],[3,"nzPrefix"],["type","text","nz-input","","placeholder","Search by name, phone or code",3,"ngModel","ngModelChange"],["prefixTemplate",""],["nz-col","",2,"text-align","right",3,"nzXs","nzSm","nzMd"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus"],[3,"nzData","nzLoading"],["basicTable",""],[4,"ngFor","ngForOf"],["nz-icon","","nzType","search"],[2,"color","#1890ff"],[3,"nzColor"],["nz-button","","nzType","default","nzShape","circle","nz-tooltip","View",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary","nzShape","circle","nz-tooltip","Edit",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","default","nzShape","circle","nz-tooltip","View",3,"click"],["nz-icon","","nzType","eye"],["nz-button","","nzType","primary","nzShape","circle","nz-tooltip","Edit",3,"click"],["nz-icon","","nzType","edit"]],template:function(r,a){if(1&r&&(n.TgZ(0,"nz-card",0)(1,"div",1)(2,"div",2)(3,"nz-input-group",3)(4,"input",4),n.NdJ("ngModelChange",function(p){return a.searchText=p}),n.qZA()(),n.YNc(5,G,1,0,"ng-template",null,5,n.W1O),n.qZA(),n.TgZ(7,"div",6)(8,"button",7),n.NdJ("click",function(){return a.navigateToCreate()}),n._UZ(9,"i",8),n._uU(10," Create Client "),n.qZA()()(),n.TgZ(11,"nz-table",9,10)(13,"thead")(14,"tr")(15,"th"),n._uU(16,"Code"),n.qZA(),n.TgZ(17,"th"),n._uU(18,"Name"),n.qZA(),n.TgZ(19,"th"),n._uU(20,"Phone"),n.qZA(),n.TgZ(21,"th"),n._uU(22,"Area"),n.qZA(),n.TgZ(23,"th"),n._uU(24,"Status"),n.qZA(),n.TgZ(25,"th"),n._uU(26,"Actions"),n.qZA()()(),n.TgZ(27,"tbody"),n.YNc(28,K,17,6,"tr",11),n.qZA()()()),2&r){const c=n.MAs(6),p=n.MAs(12);n.xp6(1),n.Q6J("nzGutter",16),n.xp6(1),n.Q6J("nzXs",24)("nzSm",12)("nzMd",8),n.xp6(1),n.Q6J("nzPrefix",c),n.xp6(1),n.Q6J("ngModel",a.searchText),n.xp6(3),n.Q6J("nzXs",24)("nzSm",12)("nzMd",16),n.xp6(4),n.Q6J("nzData",a.filteredClients)("nzLoading",a.loading),n.xp6(17),n.Q6J("ngForOf",p.data)}},dependencies:[d.sg,l.Fj,l.JJ,l.On,T.bd,m.N8,m.Uo,m._C,m.Om,m.p0,m.$Z,C.ix,Q.w,J.dQ,Z.Ls,g.Zp,g.gB,g.ke,u.t3,u.SK,D.j,z.NU,z.$1,v.SY]}),t})();var f=s(6704),F=s(8231),O=s(8521);function W(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"div",23)(1,"i",24),n.NdJ("click",function(){n.CHM(e);const r=n.oxw();return n.KtG(r.onCancel())}),n.qZA(),n.TgZ(2,"span",25),n._uU(3),n.qZA()()}if(2&t){const e=n.oxw();n.xp6(3),n.Oqu(e.isEditMode?"Edit Client":"Create New Client")}}function nn(t,i){if(1&t&&n._UZ(0,"nz-option",26),2&t){const e=i.$implicit;n.Q6J("nzValue",e.name)("nzLabel",e.name)}}function tn(t,i){if(1&t&&n._UZ(0,"nz-option",26),2&t){const e=i.$implicit;n.Q6J("nzValue",e)("nzLabel",e)}}let L=(()=>{const i=class{constructor(o,r,a,c,p){this.fb=o,this.route=r,this.router=a,this.appService=c,this.message=p,this.isEditMode=!1,this.clientId=null,this.loading=!1,this.areas=[],this.filteredSubareas=[]}ngOnInit(){this.initForm(),this.loadAreas(),this.route.paramMap.subscribe(o=>{this.clientId=o.get("id"),this.clientId&&(this.isEditMode=!0,this.loadClientDetails(this.clientId))})}initForm(){this.clientForm=this.fb.group({code:["",[l.kI.required]],name:["",[l.kI.required]],phone:["",[l.kI.required]],area:[""],subarea:[""],address:[""],status:["Active",[l.kI.required]]})}loadAreas(){this.appService.getAreas().subscribe(o=>{this.areas=o.data||o})}loadClientDetails(o){this.loading=!0,this.appService.getClients().subscribe({next:r=>{const c=(r.data||r).find(p=>p._id===o);c?this.patchForm(c):(this.message.error("Client not found"),this.router.navigate(["/clients"])),this.loading=!1},error:()=>this.loading=!1})}patchForm(o){this.clientForm.patchValue({code:o.code,name:o.name,phone:o.phone,area:o.area,address:o.address,status:o.status||"Active"}),this.onAreaChange(o.subarea)}onAreaChange(o){const r=this.clientForm.get("area")?.value;if(r){const a=this.areas.find(c=>c.name===r);a?this.appService.getSubareas(a._id).subscribe({next:c=>{this.filteredSubareas=(c.data||c).map(N=>N.name),o&&this.clientForm.patchValue({subarea:o})},error:()=>this.filteredSubareas=[]}):this.filteredSubareas=[]}else this.filteredSubareas=[]}submitForm(){if(this.clientForm.valid){this.loading=!0;const o=this.clientForm.value;this.isEditMode&&this.clientId?this.appService.updateClient(this.clientId,o).subscribe({next:()=>{this.message.success("Client updated successfully"),this.router.navigate(["/clients"])},error:()=>{this.message.error("Failed to update client"),this.loading=!1}}):this.appService.addClient(o).subscribe({next:()=>{this.message.success("Client created successfully"),this.router.navigate(["/clients"])},error:()=>{this.message.error("Failed to create client"),this.loading=!1}})}else Object.values(this.clientForm.controls).forEach(o=>{o.invalid&&(o.markAsDirty(),o.updateValueAndValidity({onlySelf:!0}))})}onCancel(){this.router.navigate(["/clients"])}};let t=i;return i.\u0275fac=function(r){return new(r||i)(n.Y36(l.qu),n.Y36(_.gz),n.Y36(_.F0),n.Y36(b.z),n.Y36(S.dD))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-client-form"]],decls:58,vars:20,consts:[[3,"nzTitle"],["titleTemplate",""],["nz-form","","nzLayout","vertical",3,"formGroup"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXs","nzMd"],["nzRequired",""],["nzErrorTip","Please enter client code"],["nz-input","","formControlName","code","placeholder","e.g. C001",2,"text-transform","uppercase"],["formControlName","status"],["nz-radio","","nzValue","Active"],["nz-radio","","nzValue","Inactive"],["nzErrorTip","Please enter name"],["nz-input","","formControlName","name","placeholder","Full Name"],["nzErrorTip","Please enter phone number"],["nz-input","","formControlName","phone","placeholder","Phone Number"],["formControlName","area","nzPlaceHolder","Select Area","nzShowSearch","","nzAllowClear","",3,"ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["formControlName","subarea","nzPlaceHolder","Select Subarea","nzShowSearch","","nzAllowClear",""],["nz-col","",3,"nzXs"],["nz-input","","formControlName","address","rows","3","placeholder","Full Address"],[2,"text-align","right","margin-top","16px"],["nz-button","","nzType","default",2,"margin-right","8px",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"],[2,"display","flex","align-items","center"],["nz-icon","","nzType","arrow-left","nzTheme","outline","nz-tooltip","Back to List",2,"cursor","pointer","margin-right","16px","font-size","18px",3,"click"],[2,"font-size","18px","font-weight","bold"],[3,"nzValue","nzLabel"]],template:function(r,a){if(1&r&&(n.TgZ(0,"nz-card",0),n.YNc(1,W,4,1,"ng-template",null,1,n.W1O),n.TgZ(3,"form",2)(4,"div",3)(5,"div",4)(6,"nz-form-item")(7,"nz-form-label",5),n._uU(8,"Client Code"),n.qZA(),n.TgZ(9,"nz-form-control",6),n._UZ(10,"input",7),n.qZA()()(),n.TgZ(11,"div",4)(12,"nz-form-item")(13,"nz-form-label",5),n._uU(14,"Status"),n.qZA(),n.TgZ(15,"nz-form-control")(16,"nz-radio-group",8)(17,"label",9),n._uU(18,"Active"),n.qZA(),n.TgZ(19,"label",10),n._uU(20,"Inactive"),n.qZA()()()()(),n.TgZ(21,"div",4)(22,"nz-form-item")(23,"nz-form-label",5),n._uU(24,"Client Name"),n.qZA(),n.TgZ(25,"nz-form-control",11),n._UZ(26,"input",12),n.qZA()()(),n.TgZ(27,"div",4)(28,"nz-form-item")(29,"nz-form-label",5),n._uU(30,"Phone Number"),n.qZA(),n.TgZ(31,"nz-form-control",13),n._UZ(32,"input",14),n.qZA()()(),n.TgZ(33,"div",4)(34,"nz-form-item")(35,"nz-form-label"),n._uU(36,"Area"),n.qZA(),n.TgZ(37,"nz-form-control")(38,"nz-select",15),n.NdJ("ngModelChange",function(){return a.onAreaChange()}),n.YNc(39,nn,1,2,"nz-option",16),n.qZA()()()(),n.TgZ(40,"div",4)(41,"nz-form-item")(42,"nz-form-label"),n._uU(43,"Subarea"),n.qZA(),n.TgZ(44,"nz-form-control")(45,"nz-select",17),n.YNc(46,tn,1,2,"nz-option",16),n.qZA()()()(),n.TgZ(47,"div",18)(48,"nz-form-item")(49,"nz-form-label"),n._uU(50,"Address"),n.qZA(),n.TgZ(51,"nz-form-control"),n._UZ(52,"textarea",19),n.qZA()()()(),n.TgZ(53,"div",20)(54,"button",21),n.NdJ("click",function(){return a.onCancel()}),n._uU(55,"Cancel"),n.qZA(),n.TgZ(56,"button",22),n.NdJ("click",function(){return a.submitForm()}),n._uU(57),n.qZA()()()()),2&r){const c=n.MAs(2);n.Q6J("nzTitle",c),n.xp6(3),n.Q6J("formGroup",a.clientForm),n.xp6(1),n.Q6J("nzGutter",24),n.xp6(1),n.Q6J("nzXs",24)("nzMd",12),n.xp6(6),n.Q6J("nzXs",24)("nzMd",12),n.xp6(10),n.Q6J("nzXs",24)("nzMd",12),n.xp6(6),n.Q6J("nzXs",24)("nzMd",12),n.xp6(6),n.Q6J("nzXs",24)("nzMd",12),n.xp6(6),n.Q6J("ngForOf",a.areas),n.xp6(1),n.Q6J("nzXs",24)("nzMd",12),n.xp6(6),n.Q6J("ngForOf",a.filteredSubareas),n.xp6(1),n.Q6J("nzXs",24),n.xp6(9),n.Q6J("nzLoading",a.loading),n.xp6(1),n.hij(" ",a.isEditMode?"Update Client":"Create Client"," ")}},dependencies:[d.sg,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,T.bd,C.ix,Q.w,J.dQ,Z.Ls,g.Zp,u.t3,u.SK,f.Lr,f.Nx,f.iK,f.Fd,F.Ip,F.Vq,v.SY,O.Of,O.Dg]}),t})();var B=s(445),en=s(3353),k=s(6287),h=s(7582),$=s(7579),E=s(6451),U=s(3187),Y=s(2722),on=s(8675),rn=s(3900),an=s(3601),sn=s(8505),x=s(2536),cn=s(8932),M=s(3303);function ln(t,i){1&t&&n.Hsn(0)}const pn=["*"];function dn(t,i){if(1&t&&(n.ynx(0),n._uU(1),n.BQk()),2&t){const e=n.oxw(3);n.xp6(1),n.Oqu(e.nzTitle)}}function _n(t,i){if(1&t&&(n.TgZ(0,"div",6),n.YNc(1,dn,2,1,"ng-container",7),n.qZA()),2&t){const e=n.oxw(2);n.xp6(1),n.Q6J("nzStringTemplateOutlet",e.nzTitle)}}function mn(t,i){if(1&t&&(n.ynx(0),n._uU(1),n.BQk()),2&t){const e=n.oxw(3);n.xp6(1),n.Oqu(e.nzExtra)}}function gn(t,i){if(1&t&&(n.TgZ(0,"div",8),n.YNc(1,mn,2,1,"ng-container",7),n.qZA()),2&t){const e=n.oxw(2);n.xp6(1),n.Q6J("nzStringTemplateOutlet",e.nzExtra)}}function un(t,i){if(1&t&&(n.TgZ(0,"div",3),n.YNc(1,_n,2,1,"div",4),n.YNc(2,gn,2,1,"div",5),n.qZA()),2&t){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.nzTitle),n.xp6(1),n.Q6J("ngIf",e.nzExtra)}}function zn(t,i){if(1&t&&(n.ynx(0),n._uU(1),n.BQk()),2&t){const e=n.oxw(2).$implicit;n.xp6(1),n.hij(" ",e.title," ")}}function fn(t,i){}function hn(t,i){if(1&t&&(n.ynx(0),n.TgZ(1,"td",12)(2,"div",13)(3,"span",14),n.YNc(4,zn,2,1,"ng-container",7),n.qZA(),n.TgZ(5,"span",15),n.YNc(6,fn,0,0,"ng-template",16),n.qZA()()(),n.BQk()),2&t){const e=n.oxw().$implicit,o=n.oxw(3);n.xp6(1),n.Q6J("colSpan",e.span),n.xp6(2),n.ekj("ant-descriptions-item-no-colon",!o.nzColon),n.xp6(1),n.Q6J("nzStringTemplateOutlet",e.title),n.xp6(2),n.Q6J("ngTemplateOutlet",e.content)}}function xn(t,i){if(1&t&&(n.ynx(0),n._uU(1),n.BQk()),2&t){const e=n.oxw(2).$implicit;n.xp6(1),n.hij(" ",e.title," ")}}function Tn(t,i){}function Cn(t,i){if(1&t&&(n.ynx(0),n.TgZ(1,"td",14),n.YNc(2,xn,2,1,"ng-container",7),n.qZA(),n.TgZ(3,"td",17),n.YNc(4,Tn,0,0,"ng-template",16),n.qZA(),n.BQk()),2&t){const e=n.oxw().$implicit;n.xp6(2),n.Q6J("nzStringTemplateOutlet",e.title),n.xp6(1),n.Q6J("colSpan",2*e.span-1),n.xp6(1),n.Q6J("ngTemplateOutlet",e.content)}}function Zn(t,i){if(1&t&&(n.ynx(0),n.YNc(1,hn,7,5,"ng-container",2),n.YNc(2,Cn,5,3,"ng-container",2),n.BQk()),2&t){const e=n.oxw(3);n.xp6(1),n.Q6J("ngIf",!e.nzBordered),n.xp6(1),n.Q6J("ngIf",e.nzBordered)}}function vn(t,i){if(1&t&&(n.TgZ(0,"tr",10),n.YNc(1,Zn,3,2,"ng-container",11),n.qZA()),2&t){const e=i.$implicit;n.xp6(1),n.Q6J("ngForOf",e)}}function Nn(t,i){if(1&t&&(n.ynx(0),n.YNc(1,vn,2,1,"tr",9),n.BQk()),2&t){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.itemMatrix)}}function An(t,i){if(1&t&&(n.ynx(0),n._uU(1),n.BQk()),2&t){const e=n.oxw().$implicit;n.xp6(1),n.hij(" ",e.title," ")}}function yn(t,i){if(1&t&&(n.ynx(0),n.TgZ(1,"td",12)(2,"div",13)(3,"span",14),n.YNc(4,An,2,1,"ng-container",7),n.qZA()()(),n.BQk()),2&t){const e=i.$implicit,o=n.oxw(4);n.xp6(1),n.Q6J("colSpan",e.span),n.xp6(2),n.ekj("ant-descriptions-item-no-colon",!o.nzColon),n.xp6(1),n.Q6J("nzStringTemplateOutlet",e.title)}}function bn(t,i){}function Sn(t,i){if(1&t&&(n.ynx(0),n.TgZ(1,"td",12)(2,"div",13)(3,"span",15),n.YNc(4,bn,0,0,"ng-template",16),n.qZA()()(),n.BQk()),2&t){const e=i.$implicit;n.xp6(1),n.Q6J("colSpan",e.span),n.xp6(3),n.Q6J("ngTemplateOutlet",e.content)}}function Qn(t,i){if(1&t&&(n.ynx(0),n.TgZ(1,"tr",10),n.YNc(2,yn,5,4,"ng-container",11),n.qZA(),n.TgZ(3,"tr",10),n.YNc(4,Sn,5,2,"ng-container",11),n.qZA(),n.BQk()),2&t){const e=i.$implicit;n.xp6(2),n.Q6J("ngForOf",e),n.xp6(2),n.Q6J("ngForOf",e)}}function Jn(t,i){if(1&t&&(n.ynx(0),n.YNc(1,Qn,5,2,"ng-container",11),n.BQk()),2&t){const e=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",e.itemMatrix)}}function Dn(t,i){if(1&t&&(n.ynx(0),n._uU(1),n.BQk()),2&t){const e=n.oxw().$implicit;n.xp6(1),n.hij(" ",e.title," ")}}function Fn(t,i){if(1&t&&(n.ynx(0),n.TgZ(1,"td",18),n.YNc(2,Dn,2,1,"ng-container",7),n.qZA(),n.BQk()),2&t){const e=i.$implicit;n.xp6(1),n.Q6J("colSpan",e.span),n.xp6(1),n.Q6J("nzStringTemplateOutlet",e.title)}}function On(t,i){}function Un(t,i){if(1&t&&(n.ynx(0),n.TgZ(1,"td",17),n.YNc(2,On,0,0,"ng-template",16),n.qZA(),n.BQk()),2&t){const e=i.$implicit;n.xp6(1),n.Q6J("colSpan",e.span),n.xp6(1),n.Q6J("ngTemplateOutlet",e.content)}}function Yn(t,i){if(1&t&&(n.ynx(0),n.TgZ(1,"tr",10),n.YNc(2,Fn,3,2,"ng-container",11),n.qZA(),n.TgZ(3,"tr",10),n.YNc(4,Un,3,2,"ng-container",11),n.qZA(),n.BQk()),2&t){const e=i.$implicit;n.xp6(2),n.Q6J("ngForOf",e),n.xp6(2),n.Q6J("ngForOf",e)}}function Mn(t,i){if(1&t&&(n.ynx(0),n.YNc(1,Yn,5,2,"ng-container",11),n.BQk()),2&t){const e=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",e.itemMatrix)}}function qn(t,i){if(1&t&&(n.ynx(0),n.YNc(1,Jn,2,1,"ng-container",2),n.YNc(2,Mn,2,1,"ng-container",2),n.BQk()),2&t){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",!e.nzBordered),n.xp6(1),n.Q6J("ngIf",e.nzBordered)}}let j=(()=>{class t{constructor(){this.nzSpan=1,this.nzTitle="",this.inputChange$=new $.x}ngOnChanges(){this.inputChange$.next()}ngOnDestroy(){this.inputChange$.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["nz-descriptions-item"]],viewQuery:function(e,o){if(1&e&&n.Gf(n.Rgc,7),2&e){let r;n.iGM(r=n.CRH())&&(o.content=r.first)}},inputs:{nzSpan:"nzSpan",nzTitle:"nzTitle"},exportAs:["nzDescriptionsItem"],features:[n.TTD],ngContentSelectors:pn,decls:1,vars:0,template:function(e,o){1&e&&(n.F$t(),n.YNc(0,ln,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),(0,h.gn)([(0,U.Rn)()],t.prototype,"nzSpan",void 0),t})();const wn={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};let Ln=(()=>{class t{constructor(e,o,r,a){this.nzConfigService=e,this.cdr=o,this.breakpointService=r,this.directionality=a,this._nzModuleName="descriptions",this.nzBordered=!1,this.nzLayout="horizontal",this.nzColumn=wn,this.nzSize="default",this.nzTitle="",this.nzColon=!0,this.itemMatrix=[],this.realColumn=3,this.dir="ltr",this.breakpoint=M.G_.md,this.destroy$=new $.x}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe((0,Y.R)(this.destroy$)).subscribe(e=>{this.dir=e})}ngOnChanges(e){e.nzColumn&&this.prepareMatrix()}ngAfterContentInit(){const e=this.items.changes.pipe((0,on.O)(this.items),(0,Y.R)(this.destroy$));(0,E.T)(e,e.pipe((0,rn.w)(()=>(0,E.T)(...this.items.map(o=>o.inputChange$)).pipe((0,an.e)(16)))),this.breakpointService.subscribe(M.WV).pipe((0,sn.b)(o=>this.breakpoint=o))).pipe((0,Y.R)(this.destroy$)).subscribe(()=>{this.prepareMatrix(),this.cdr.markForCheck()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}prepareMatrix(){if(!this.items)return;let e=[],o=0;const r=this.realColumn=this.getColumn(),a=this.items.toArray(),c=a.length,p=[],N=()=>{p.push(e),e=[],o=0};for(let A=0;A<c;A++){const Kn=a[A],{nzTitle:q,content:I,nzSpan:y}=Kn;o+=y,o>=r?(o>r&&(0,cn.ZK)(`"nzColumn" is ${r} but we have row length ${o}`),e.push({title:q,content:I,span:r-(o-y)}),N()):A===c-1?(e.push({title:q,content:I,span:r-(o-y)}),N()):e.push({title:q,content:I,span:y})}this.itemMatrix=p}getColumn(){return"number"!=typeof this.nzColumn?this.nzColumn[this.breakpoint]:this.nzColumn}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(x.jY),n.Y36(n.sBO),n.Y36(M.r3),n.Y36(B.Is,8))},t.\u0275cmp=n.Xpm({type:t,selectors:[["nz-descriptions"]],contentQueries:function(e,o,r){if(1&e&&n.Suo(r,j,4),2&e){let a;n.iGM(a=n.CRH())&&(o.items=a)}},hostAttrs:[1,"ant-descriptions"],hostVars:8,hostBindings:function(e,o){2&e&&n.ekj("ant-descriptions-bordered",o.nzBordered)("ant-descriptions-middle","middle"===o.nzSize)("ant-descriptions-small","small"===o.nzSize)("ant-descriptions-rtl","rtl"===o.dir)},inputs:{nzBordered:"nzBordered",nzLayout:"nzLayout",nzColumn:"nzColumn",nzSize:"nzSize",nzTitle:"nzTitle",nzExtra:"nzExtra",nzColon:"nzColon"},exportAs:["nzDescriptions"],features:[n.TTD],decls:6,vars:3,consts:[["class","ant-descriptions-header",4,"ngIf"],[1,"ant-descriptions-view"],[4,"ngIf"],[1,"ant-descriptions-header"],["class","ant-descriptions-title",4,"ngIf"],["class","ant-descriptions-extra",4,"ngIf"],[1,"ant-descriptions-title"],[4,"nzStringTemplateOutlet"],[1,"ant-descriptions-extra"],["class","ant-descriptions-row",4,"ngFor","ngForOf"],[1,"ant-descriptions-row"],[4,"ngFor","ngForOf"],[1,"ant-descriptions-item",3,"colSpan"],[1,"ant-descriptions-item-container"],[1,"ant-descriptions-item-label"],[1,"ant-descriptions-item-content"],[3,"ngTemplateOutlet"],[1,"ant-descriptions-item-content",3,"colSpan"],[1,"ant-descriptions-item-label",3,"colSpan"]],template:function(e,o){1&e&&(n.YNc(0,un,3,2,"div",0),n.TgZ(1,"div",1)(2,"table")(3,"tbody"),n.YNc(4,Nn,2,1,"ng-container",2),n.YNc(5,qn,3,2,"ng-container",2),n.qZA()()()),2&e&&(n.Q6J("ngIf",o.nzTitle||o.nzExtra),n.xp6(4),n.Q6J("ngIf","horizontal"===o.nzLayout),n.xp6(1),n.Q6J("ngIf","vertical"===o.nzLayout))},dependencies:[d.sg,d.O5,d.tP,k.f],encapsulation:2,changeDetection:0}),(0,h.gn)([(0,U.yF)(),(0,x.oS)()],t.prototype,"nzBordered",void 0),(0,h.gn)([(0,x.oS)()],t.prototype,"nzColumn",void 0),(0,h.gn)([(0,x.oS)()],t.prototype,"nzSize",void 0),(0,h.gn)([(0,x.oS)(),(0,U.yF)()],t.prototype,"nzColon",void 0),t})(),Bn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[B.vT,d.ez,k.T,en.ud]}),t})();var X=s(2577),V=s(5681);function kn(t,i){1&t&&(n.TgZ(0,"div",2),n._UZ(1,"nz-spin",3),n.qZA())}function $n(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"div",17)(1,"i",18),n.NdJ("click",function(){n.CHM(e);const r=n.oxw(2);return n.KtG(r.backToList())}),n.qZA(),n.TgZ(2,"span",19),n._uU(3),n.qZA(),n.TgZ(4,"nz-tag",20),n._uU(5),n.qZA()()}if(2&t){const e=n.oxw(2);n.xp6(3),n.Oqu(e.client.name),n.xp6(1),n.Q6J("nzColor","Inactive"===e.client.status?"red":"green"),n.xp6(1),n.Oqu(e.client.status||"Active")}}function En(t,i){if(1&t){const e=n.EpF();n.TgZ(0,"button",22),n.NdJ("click",function(){n.CHM(e);const r=n.oxw(3);return n.KtG(r.editClient())}),n._UZ(1,"i",23),n._uU(2," Edit "),n.qZA()}}function jn(t,i){1&t&&(n.TgZ(0,"nz-space"),n.YNc(1,En,3,0,"button",21),n.qZA())}const Xn=function(){return{xxl:3,xl:3,lg:3,md:2,sm:1,xs:1}};function Vn(t,i){if(1&t&&(n.TgZ(0,"nz-card",4),n.YNc(1,$n,6,3,"ng-template",null,5,n.W1O),n.YNc(3,jn,2,0,"ng-template",null,6,n.W1O),n.TgZ(5,"nz-descriptions",7)(6,"nz-descriptions-item",8)(7,"code",9),n._uU(8),n.qZA()(),n.TgZ(9,"nz-descriptions-item",10),n._uU(10),n.qZA(),n.TgZ(11,"nz-descriptions-item",11),n._uU(12),n.ALo(13,"date"),n.qZA(),n.TgZ(14,"nz-descriptions-item",12),n._uU(15),n.qZA(),n.TgZ(16,"nz-descriptions-item",13),n._uU(17),n.qZA(),n.TgZ(18,"nz-descriptions-item",14),n._uU(19),n.qZA()(),n._UZ(20,"nz-divider"),n.TgZ(21,"div",15),n._UZ(22,"i",16),n.TgZ(23,"p"),n._uU(24,"Transaction history showing here soon..."),n.qZA()()()),2&t){const e=n.MAs(2),o=n.MAs(4),r=n.oxw();n.Q6J("nzTitle",e)("nzExtra",o),n.xp6(5),n.Q6J("nzColumn",n.DdM(13,Xn)),n.xp6(3),n.Oqu(r.client.code),n.xp6(2),n.Oqu(r.client.phone),n.xp6(2),n.Oqu(n.xi3(13,10,r.client.createdAt,"mediumDate")),n.xp6(3),n.Oqu(r.client.area||"-"),n.xp6(2),n.Oqu(r.client.subarea||"-"),n.xp6(1),n.Q6J("nzSpan",3),n.xp6(1),n.Oqu(r.client.address||"-")}}const Gn=[{path:"",component:R},{path:"create",component:L},{path:"edit/:id",component:L},{path:"view/:id",component:(()=>{const i=class{constructor(o,r,a,c){this.route=o,this.router=r,this.appService=a,this.message=c,this.client=null,this.loading=!1}ngOnInit(){const o=this.route.snapshot.paramMap.get("id");o?this.loadClient(o):this.backToList()}loadClient(o){this.loading=!0,this.appService.getClients().subscribe({next:r=>{this.client=(r.data||r).find(c=>c._id===o),this.loading=!1,this.client||(this.message.error("Client not found"),this.backToList())},error:()=>{this.message.error("Failed to load client details"),this.loading=!1,this.backToList()}})}backToList(){this.router.navigate(["/clients"])}editClient(){this.client&&this.router.navigate(["/clients/edit",this.client._id])}};let t=i;return i.\u0275fac=function(r){return new(r||i)(n.Y36(_.gz),n.Y36(_.F0),n.Y36(b.z),n.Y36(S.dD))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-client-detail"]],decls:2,vars:2,consts:[["style","text-align: center; padding: 50px;",4,"ngIf"],[3,"nzTitle","nzExtra",4,"ngIf"],[2,"text-align","center","padding","50px"],["nzSimple","","nzTip","Loading client details..."],[3,"nzTitle","nzExtra"],["titleTemplate",""],["extraTemplate",""],["nzTitle","Personal Info","nzBordered","",3,"nzColumn"],["nzTitle","Client Code"],[2,"color","#1890ff"],["nzTitle","Phone"],["nzTitle","Registered On"],["nzTitle","Area"],["nzTitle","Subarea"],["nzTitle","Address",3,"nzSpan"],[2,"text-align","center","color","#999","padding","20px"],["nz-icon","","nzType","file-text",2,"font-size","32px","margin-bottom","10px"],[2,"display","flex","align-items","center"],["nz-icon","","nzType","arrow-left","nzTheme","outline","nz-tooltip","Back to List",2,"cursor","pointer","margin-right","16px","font-size","18px",3,"click"],[2,"font-size","18px","font-weight","bold","margin-right","12px"],[3,"nzColor"],["nz-button","","nzType","primary",3,"click",4,"nzSpaceItem"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","edit"]],template:function(r,a){1&r&&(n.YNc(0,kn,2,0,"div",0),n.YNc(1,Vn,25,14,"nz-card",1)),2&r&&(n.Q6J("ngIf",a.loading),n.xp6(1),n.Q6J("ngIf",a.client&&!a.loading))},dependencies:[d.O5,T.bd,C.ix,Q.w,J.dQ,Z.Ls,D.j,Ln,j,X.g,z.NU,z.$1,v.SY,V.W,d.uU]}),t})()}];let Pn=(()=>{const i=class{};let t=i;return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[_.Bz.forChild(Gn),_.Bz]}),t})(),Hn=(()=>{const i=class{};let t=i;return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[d.ez,l.u5,l.UX,Pn,T.vh,m.HQ,C.sL,Z.PV,g.o7,f.U5,F.LV,D.X,u.Jb,Bn,X.S,z.zf,v.cg,V.j,O.aF]}),t})()}}]);